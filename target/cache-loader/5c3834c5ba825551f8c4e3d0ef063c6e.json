{"remainingRequest":"C:\\jhipster\\cleanclient\\node_modules\\thread-loader\\dist\\cjs.js??ref--4-2!C:\\jhipster\\cleanclient\\node_modules\\ts-loader\\index.js??ref--4-3!C:\\jhipster\\cleanclient\\node_modules\\tslint-loader\\index.js!C:\\jhipster\\cleanclient\\src\\main\\webapp\\app\\entities\\import-fichier\\import-fichier-result-map.tsx","dependencies":[{"path":"C:\\jhipster\\cleanclient\\src\\main\\webapp\\app\\entities\\import-fichier\\import-fichier-result-map.tsx","mtime":1564394573936},{"path":"C:\\jhipster\\cleanclient\\node_modules\\react-hot-loader\\webpack.js","mtime":499162500000},{"path":"C:\\jhipster\\cleanclient\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\jhipster\\cleanclient\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\jhipster\\cleanclient\\node_modules\\ts-loader\\index.js","mtime":1545640398000},{"path":"C:\\jhipster\\cleanclient\\node_modules\\tslint-loader\\index.js","mtime":1519899048000}],"contextDependencies":[],"result":["import React from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './import-fichier-result-map.css';\r\nimport ResultMapInfo from './import-fichier-result-map-info';\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n    iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n    shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\nexport class ImportFichierResultMap extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.map = {};\r\n        this.getMarkerClients = () => {\r\n            const { result } = this.props;\r\n            if (result && result.localisationClients && result.localisationClients.length > 0) {\r\n                const markers = result.localisationClients\r\n                    .filter(item1 => item1.latitude && item1.longitude)\r\n                    .map((item, i) => {\r\n                    return L.marker([item.latitude, item.longitude], { icon: blueIcon }).on({\r\n                        mouseover: () => this._handleMouseOver(item),\r\n                        mouseout: () => this._handleMouseOut(item)\r\n                    });\r\n                });\r\n                L.layerGroup(markers).addTo(this.map);\r\n            }\r\n        };\r\n        this.state = {\r\n            etablissementHover: {}\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        this.map = L.map('mapSite', { zoomControl: false, maxZoom: 15, minZoom: 6 }).setView([46.973622, 1.80852], 6);\r\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n        }).addTo(this.map);\r\n        this.getMarkerClients();\r\n        this.getLegend();\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (!prevProps.result.localisationClients || prevProps.result.localisationClients.length !== this.props.result.localisationClients.length) {\r\n            this.getMarkerClients();\r\n        }\r\n        if (!prevProps.result.localisationProspects || prevProps.result.localisationProspects.length !== this.props.result.localisationProspects.length) {\r\n            this.getMarkerProspects();\r\n        }\r\n    }\r\n    getLegend() {\r\n        var legend = L.control({ position: 'topleft' });\r\n        legend.onAdd = function () {\r\n            var marker = L.DomUtil.create('marker');\r\n            marker.innerHTML = \" <img class='markersLegend' src='https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png'> \"\r\n                + \" <div class='txtLegend'>Clients</div> \"\r\n                + \" <img class='markersLegend' src='https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png'> \"\r\n                + \" <div class='txtLegend'>Prospects</div> \";\r\n            return marker;\r\n        };\r\n        legend.addTo(this.map);\r\n    }\r\n    _handleMouseOver(item) {\r\n        this.setState({ etablissementHover: item });\r\n    }\r\n    ;\r\n    _handleMouseOut(item) {\r\n        this.setState({ etablissementHover: {} });\r\n    }\r\n    ;\r\n    getMarkerProspects() {\r\n        const { result } = this.props;\r\n        if (result && result.localisationProspects && result.localisationProspects.length > 0) {\r\n            const markers = result.localisationProspects\r\n                .filter(item1 => item1.latitude && item1.longitude)\r\n                .map((item, i) => {\r\n                return L.marker([item.latitude, item.longitude], { icon: yellowIcon }).on({\r\n                    mouseover: () => this.setState({ etablissementHover: item }),\r\n                    mouseout: () => this.setState({ etablissementHover: {} })\r\n                });\r\n            });\r\n            L.layerGroup(markers).addTo(this.map);\r\n        }\r\n    }\r\n    getMarkerDivIcon(elasticScore) {\r\n        //const opacity = elasticScore / 10000;\r\n        return L.divIcon({\r\n            className: 'my-custom-pin',\r\n            iconAnchor: [0, 24],\r\n            labelAnchor: [-6, 0],\r\n            popupAnchor: [0, -36],\r\n            html: `<div><div class=\"pin2\" /><div>`\r\n        });\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", { id: \"mapInfo\", className: \"infoMap\" },\r\n                React.createElement(ResultMapInfo, { localisation: this.state.etablissementHover })),\r\n            React.createElement(\"div\", { id: \"mapSite\", className: \"map\" })));\r\n    }\r\n}\r\nconst blueIcon = new L.Icon({\r\n    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\nconst yellowIcon = new L.Icon({\r\n    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-yellow.png',\r\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n});\r\n",{"version":3,"file":"C:\\jhipster\\cleanclient\\src\\main\\webapp\\app\\entities\\import-fichier\\import-fichier-result-map.tsx","sourceRoot":"","sources":["C:\\jhipster\\cleanclient\\node_modules\\tslint-loader\\index.js!C:\\jhipster\\cleanclient\\src\\main\\webapp\\app\\entities\\import-fichier\\import-fichier-result-map.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Col } from 'reactstrap';\r\nimport { Translate } from 'react-jhipster';\r\nimport { IResult } from 'app/shared/model/result.model';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './import-fichier-result-map.css';\r\nimport ResultMapInfo from './import-fichier-result-map-info';\r\nimport { ILocalisation } from 'app/shared/model/localisation.model';\r\nimport { IImportLigne } from 'app/shared/model/import-ligne.model';\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\r\n});\r\nexport interface IImportFichierResultMapProp {\r\n  result: IResult;\r\n}\r\n\r\nexport interface IImportFichierResultMapState {\r\n  etablissementHover: ILocalisation;\r\n}\r\n\r\nexport class ImportFichierResultMap extends React.Component<IImportFichierResultMapProp, IImportFichierResultMapState> {\r\n  map = {};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      etablissementHover: {} as ILocalisation\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.map = L.map('mapSite', { zoomControl: false, maxZoom: 15, minZoom: 6 }).setView([46.973622, 1.80852], 6);\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(this.map);\r\n    this.getMarkerClients();\r\n    this.getLegend();\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (!prevProps.result.localisationClients || prevProps.result.localisationClients.length !== this.props.result.localisationClients.length) {\r\n      this.getMarkerClients();\r\n    }\r\n    if (!prevProps.result.localisationProspects || prevProps.result.localisationProspects.length !== this.props.result.localisationProspects.length) {\r\n      this.getMarkerProspects();\r\n    }\r\n    \r\n  }\r\n\r\n  getLegend(){\r\n    var legend = L.control({position: 'topleft'});\r\n    legend.onAdd = function () {\r\n    var marker = L.DomUtil.create('marker');\r\n                                                           \r\n      marker.innerHTML = \" <img class='markersLegend' src='https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png'> \"\r\n                       + \" <div class='txtLegend'>Clients</div> \"\r\n                       + \" <img class='markersLegend' src='https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png'> \"\r\n                       + \" <div class='txtLegend'>Prospects</div> \"\r\n    return marker;\r\n     };\r\n    legend.addTo(this.map);\r\n  }\r\n\r\n  _handleMouseOver(item)  {\r\n    this.setState({ etablissementHover:item });\r\n  };\r\n  _handleMouseOut(item)  {\r\n    this.setState({ etablissementHover: {} });\r\n  };\r\n\r\n  getMarkerClients = () => {\r\n    const { result } = this.props;\r\n    if (result && result.localisationClients && result.localisationClients.length > 0) {\r\n      const markers = result.localisationClients\r\n        .filter(item1 => item1.latitude && item1.longitude)\r\n        .map((item, i) => {\r\n          return L.marker([item.latitude, item.longitude], { icon: blueIcon }).on({\r\n            mouseover: () => this._handleMouseOver(item),\r\n            mouseout: () => this._handleMouseOut(item)\r\n          });\r\n        });\r\n      L.layerGroup(markers).addTo(this.map);\r\n    }\r\n  };\r\n\r\n  getMarkerProspects() {\r\n    const { result } = this.props;\r\n    if (result && result.localisationProspects && result.localisationProspects.length > 0) {\r\n      const markers = result.localisationProspects\r\n        .filter(item1 => item1.latitude && item1.longitude)\r\n        .map((item, i) => {\r\n          return L.marker([item.latitude, item.longitude], { icon: yellowIcon }).on({\r\n            mouseover: () => this.setState({ etablissementHover: item }),\r\n            mouseout: () => this.setState({ etablissementHover: {} })\r\n          });\r\n        });\r\n      L.layerGroup(markers).addTo(this.map);\r\n    }\r\n  }\r\n\r\n  getMarkerDivIcon(elasticScore) {\r\n    //const opacity = elasticScore / 10000;\r\n    return L.divIcon({\r\n      className: 'my-custom-pin',\r\n      iconAnchor: [0, 24],\r\n      labelAnchor: [-6, 0],\r\n      popupAnchor: [0, -36],\r\n      html: `<div><div class=\"pin2\" /><div>`\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div id=\"mapInfo\" className=\"infoMap\" >\r\n          <ResultMapInfo localisation={this.state.etablissementHover} />\r\n        </div>\r\n        <div id=\"mapSite\" className=\"map\"></div> \r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst blueIcon = new L.Icon({\r\n  iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-blue.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n  popupAnchor: [1, -34],\r\n  shadowSize: [41, 41]\r\n});\r\n\r\nconst yellowIcon = new L.Icon({\r\n  iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-yellow.png',\r\n  shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\r\n  iconSize: [25, 41],\r\n  iconAnchor: [12, 41],\r\n  popupAnchor: [1, -34],\r\n  shadowSize: [41, 41]\r\n});"]}]}